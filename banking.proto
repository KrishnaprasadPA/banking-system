syntax = "proto3";

package banking;

message CustomerEvent {
  enum EventType {
    QUERY = 0;
    DEPOSIT = 1;
    WITHDRAW = 2;
  }

  string customer_id = 1;
  EventType event_type = 2;
  int32 amount = 3;
  int32 event_id = 4;
}

message BranchEvent {
  enum EventType {
    PROPAGATE_DEPOSIT = 0;
    PROPAGATE_WITHDRAW = 1;
  }

  string branch_id = 1;
  EventType event_type = 2;
  int32 amount = 3;
  int32 event_id = 4;
}

message CustomerProcess {
  string id = 1;
  repeated CustomerEvent events = 2;
}

message BranchProcess {
  string id = 1;
  int32 initial_balance = 2;
}

service BankingService {
  rpc ProcessCustomerEvents (CustomerProcess) returns (CustomerEvent);
  rpc ProcessBranchEvents (BranchProcess) returns (BranchEvent);
}